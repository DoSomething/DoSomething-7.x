<?php

/**
 * @file
 * dosomething_user.module
 **/

/**
 * Form constructor for the user profile school field form.
 *
 * @see dosomething_user_school_form_submit()
 *
 * @ingroup forms
 */
function dosomething_user_school_form($form, &$form_state) {
  $form = array();
  $form['school'] = array(
    '#type' => 'textfield',
    '#title' => 'Please update your school information:',
    '#autocomplete_path' => 'user/autocomplete',
  );
  $form['no_school'] = array(
    '#type' => 'radio',
    '#options' => array(
      0 => t('I am not affiliated with a school.'),
    ),
  );
  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Update My Information'),
  );
  return $form;
}

/**
 * Form submission handler for dosomething_user_school_form().
 *
 * @see dosomething_user_school_form()
 */
function dosomething_user_school_form_submit(&$form, &$form_state) {
  $name = check_plain($form_state['values']['school']);
  // Tell the browser to close the modal.
  $form_state['ajax_commands'][] = ctools_modal_command_dismiss();
  $form_state['ajax_commands'][] = ajax_command_html('#ctools-sample', 'You entered ' . $name);
}
