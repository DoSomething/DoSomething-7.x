<?php

/**
 * @file
 * dosomething_user.module
 **/

/**
 * Updates given $user's school field with given $school_id value.
 */
function dosomething_user_update_school($user, $school_id) {
  $profile = profile2_load_by_user($user, 'main');
  $profile->field_school_reference[LANGUAGE_NONE][0]['target_id'] = $school_id;
  $profile->save();
}

/**
 * Implements hook_user_insert().
 */
function dosomething_user_user_insert(&$edit, $account, $category) {
  if (($library = libraries_load('dsapi')) && !empty($library['loaded'])) {
    // All of this will be abstracted properly.  Stubbing for memory
    // $dsapi_client = new DSAPI(
    //   variable_get('DSAPI_ACCESS_TOKEN', '') // Set this guy in settings.php from env var
    // );
    // $users_client = new UsersResource($dsapi_client);
    // $users_client->create(array());
  }
}

