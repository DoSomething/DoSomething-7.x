<?php

class DosomethingCampaignUnitTestCase extends DrupalUnitTestCase {
  public static function getInfo() {
    return array(
      'name' => 'DoSomething Campaign Unit Tests',
      'description' => 'DoSomething Campaign unit tests.',
      'group' => 'DoSomething',
    );
  }

  public function setUp() {
    parent::setUp();
  }

  /**
   * @see dosomething_campaign_theme()
   */
  public function testTheme() {
    $theme = dosomething_campaign_theme('', '', '', 'testing');
    $this->assertTrue(isset($theme['kiva_confirmation']), '"kiva_confirmation" is defined in dosomething_campaign_theme().');
  }

  /**
   * @see dosomething_campaign_block_info()
   */
  public function testBlockInfo() {
    $block = dosomething_campaign_block_info();
    $this->assertTrue(isset($block['kiva_signup']), '"kiva_signup" is defined in dosomething_campaign_block_info().');
    $this->assertTrue(isset($block['kiva_confirmation']),'"kiva_confirmation" is defined in dosomething_campaign_block_info().');
  }
}

class DoSomethingCampaignDBUnitTestCase extends WebTestSuite {
  public static function getInfo() {
    return array(
      'name' => 'DoSomething Campaign DB Unit Tests',
      'description' => 'Tests database-driven dosomething_campaign functions.',
      'group' => 'DoSomething',
    );
  }

  public function setUp() {
    parent::setUp();
  }

  /**
   * @see dosomething_campaign_block_view()
   */
  public function subTestBlockView() {
    $signup = dosomething_campaign_block_view('kiva_signup');
    $this->assertTrue(isset($signup['content']));
    $this->assertTrue(strpos($signup['content'], 'Your First Name') !== FALSE);
    $this->assertTrue(strpos($signup['content'], "Friend's cell #") !== FALSE);

    $confirmation = dosomething_campaign_block_view('kiva_confirmation');
    $this->assertTrue(isset($confirmation['content']));
    $this->assertTrue(strpos($confirmation['content'], 'Send Me') !== FALSE);
  }
}
