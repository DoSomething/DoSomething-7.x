<?php

/**
 * @file
 * Provide a specialied slider theme function.
 */

/**
 * Implements hook_theme().
 */
function dosomething_slider_theme($existing, $type, $theme, $path) {
  return array(
    'dosomething_slider_slider' => array(
      'variables' => array('items' => NULL, 'heading' => NULL),
      'path' => $path . '/theme',
      'file' => 'theme.inc',
    ),
  );
}

/**
 * Implements hook_menu().
 */
function dosomething_slider_menu() {
  $items = array();

  $items['dosomething_slider'] = array(
    'title' => 'DoSomething Slider',
    'page callback' => 'dosomething_slider_demo',
    'access callback' => TRUE,
    'type' => MENU_CALLBACK,
  );

  return $items;
}

/**
 * A demo callback to display a slider.
 */
function dosomething_slider_demo() {
  $output = array();

  $colors = array('660000', '006600', '000066');
  $items = array();
  for ($i = 0; $i < 10; $i++) {
    $items[] = array(
      'title' => "Test $i",
      'image' => 'http://dummyimage.com/700x250/' . $colors[$i % 3] . '/fff&text=test' . $i,
      'text' => "Test $i: Lorem ipsum dolor sit amet, consectetur adipiscing elit.",
    );
  }

  $element = array(
    '#theme' => 'dosomething_slider_slider',
    '#items' => $items,
    '#heading' => array(
      'title' => 'Woot',
      'image' => variable_get('dosomething_slider_image', 'http://placekitten.com/700/250'),
      'text' => t('Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut nulla risus, congue sed accumsan ultricies, ultricies vitae lacus. Vestibulum bibendum egestas mi, in lobortis enim facilisis at. Nulla consequat pharetra eros in consequat.'),
    ),
  );
  $output['element'] = $element;

  $heading = array(
    'title' => t('Explore The Menu'),
    'image' => 'http://placekitten.com/350/125',
    'text' => t('Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut nulla risus, congue sed accumsan ultricies, ultricies vitae lacus. Vestibulum bibendum egestas mi, in lobortis enim facilisis at. Nulla consequat pharetra eros in consequat.'),
  );
  $output['theme']['#markup'] = theme('dosomething_slider_slider', array('items' => $items, 'heading' => $heading));

  return $output;
}
