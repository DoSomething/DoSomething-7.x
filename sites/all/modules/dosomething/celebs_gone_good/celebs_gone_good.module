<?php
/**
 * @file
 * Code for the Celebs Gone Good feature.
 */

include_once 'celebs_gone_good.features.inc';

function celebs_gone_good_page_alter(&$page) {
   if (preg_match('#^\/celebsgonegood#i', request_uri())) {
   	 if (preg_match('#^\/celebsgonegood\/choose#i', request_uri())) {
   	 	if (in_array('_', array_keys($_GET))) {
   	 		drupal_set_message(t("Hey! Now that you're logged in make sure you submit your vote again so we can record it!"), 'error');
	   	}
   	 }

     drupal_add_css(drupal_get_path('module', 'dosomething_campaign_styles') . '/campaign_styles/2012/cgg/styles.css');
   }
}

function celebs_gone_good_redirect(&$form, &$form_state) {
  if (user_is_logged_in()) {
     drupal_goto('celebsgonegood/voted/' . $form_state['values']['submitted_tree']['cgg_choose_a_celebrity']);
  }
}
