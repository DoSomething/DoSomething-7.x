<?php
/**
 * @file
 * Code for the Celebs Gone Good feature.
 */

include_once 'celebs_gone_good.features.inc';

function celebs_gone_good_page_alter(&$page) {
   if (preg_match('#^\/celebsgonegood#i', request_uri())) {
     drupal_add_css(drupal_get_path('module', 'dosomething_campaign_styles') . '/campaign_styles/2012/cgg/styles.css');
   }
}

function celebs_gone_good_form_alter(&$form, &$form_alter, $form_id) {
  if ($form_id == 'webform_client_form_' . variable_get('cgg_form_id')) {
     $form['#submit'][] = 'celebs_gone_good_redirect';
  }
}

function celebs_gone_good_redirect(&$form, &$form_state) {
  drupal_goto('celebsgonegood/voted/' . $form_state['values']['submitted_tree']['cgg_choose_a_celebrity']);
}
